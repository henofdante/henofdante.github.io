# 纹理基础与法线贴图

* TOC
{:toc}

## 普通纹理

1. 在 Properties 中加入 `2D` 类型的贴图 `Tex`
2. 在 `a2v` 中获取 `TEXCOORD0` 类型的顶点UV值 `uv`
3. 在 FragShader 中使用 `tex2D(Tex, uv)` 获取颜色值

## 法线贴图

1. 在 Properties 中加入 `2D` 类型法线贴图 `BumpTex`
2. 在 `a2v` 中获取 `NORMAL` 类型的法线和 `TANGENT` 类型的切线, 计算副切线  
$$ binormal = normal \times tangent $$
3. 利用法线与切线构建切线空间矩阵，即  
$$
\left[ \begin{array}{ccc}
tangent.x & binormal.x & normal.x\\
tangent.y & binormal.y & normal.y\\
tangent.z & binormal.z & normal.z
\end{array} 
\right ] \times \left[ \begin{array}{ccc}
x \\ y \\ z
\end{array}
\right]
$$
这个矩阵可以将法线变换到世界坐标系
4. 在fragShader中利用矩阵计算世界坐标系法线